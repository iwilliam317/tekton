{% extends 'base/base.html' %}
{% block css %}
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap-social.css"/>
    <link rel="stylesheet" href="/static/font-awesome-4.2.0/css/font-awesome.min.css"/>
    <script type="text/javascript" src="/static/angular/js/angular.min.js"></script>
    <script type="text/javascript" src="/static/categoria/js/categoria.js"></script>
    <script type="text/javascript">
        var categoriaApp = angular.module('categoriaApp', ['categoriaModulo']);
        var rest = angular.module('rest', []);

        rest.factory('CategoriaApi', function($http){
            return{
                salvar: function(categoria){
                    return $http.post('{{ rest_salvar_path}}', categoria);

                }
            }
        });
        function CategoriaController($scope){
            // $scope.categoria = {nome : 'Roupas', categoria_pai : 'cosmeticos'};
            $scope.selex = 'a';
            $scope.form = false;
            $scope.toggle = function () {
                $scope.form = !$scope.form;
            };
        }

    </script>
{% endblock %}
{% block body %}
	<div class="row clearfix">
        <div class="col-md-6 col-md-6-offset-3 text-center">
        {% if resultados > 0%}
        <h3 class="text-primary">Lista de Categorias</h3>
         <span class="text-muted">Resultados: {{resultados}}</span><br/><br/>
        <table class="table table-striped">
            <tr class="info">
                <td><h5>CÃ³digo</h5></td>
                <td><h5>Nome</h5></td>
                <td><h5>Categoria Pai</h5></td>
                <td><h5>Editar</h5></td>
                <td><h5>Deletar</h5></td>
            </tr>

            {% for cat in categorias %}
                <tr><td>{{cat.key.id()}}</td>
                <td>{{cat.nome}}</td>
                <td>{{cat.categoria_pai}}</td>
                <td><a href="{{ cat.editar_path }}" class="btn btn-warning glyphicon glyphicon-pencil"></a></td>
                <td><form onSubmit="return confirm('Deseja apagar esse registro?')" method="post" action="{{ cat.deletar_path }}">
                    {{ csrf_input() }}
                <button class="btn btn-danger" type="submit" ><i class="glyphicon glyphicon-trash"></i></button>

                </form></td>
                </tr>
            {% endfor %}
        </table>
        {%else%}
            <h4 class="text-primary">Nenhuma Categoria Cadastrada Ainda :(</h4>
        {%endif%}
        
			
		</div>
        
	</div>

    <div ng-app="categoriaApp" ng-controller="CategoriaController">
        <button class="btn btn-success" ng-click="toggle()">Adicionar</button><br/><br/>
        <input ng-model="categoria.nome">
        <categoriaform ng-show="form" category="categoria" nome-label="Roupas" categoria-pai-label="Categoria Pai"></categoriaform>


    </div>
{% endblock %}
